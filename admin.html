<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Technical Interview Questions - Admin Panel</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>

<body>
	<div ng-app="admin" style='margin: 20px'>
		<h1 style='text-align: center'>Technical Interview: Admin</h1>
			<label for='category'class='w3-label'>Select a Category</label>
			<select id='category' class='w3-input'>
				<option value='web'   	>Web</option>
				<option value='html'  	>HTML</option>
				<option value='html5' 	>HTML5</option>
				<option value='css'   	>CSS</option>
				<option value='css3'  	>CSS3</option
				<option value='w3'	  	>W3 CSS</option>
				<option value='js'    	>Javascript</option>
				<option value='jquery'	>JQuery</option>
				<option value='java'  	>Java</option>
				<option value='csharp'	>C#</option>
				<option value='cpp'   	>C++</option>
				<option value='c'     	>C</option>
				<option value='r'     	>R</option>
				<option value='python'	>Python</option>
				<option value='dos'	  	>DOS</option>
				<option value='os'	  	>OS</option>
				<option value='mysql' 	>MySQL</option>
				<option value='mysqldba'>MySQL DBA</option>
				<option value='agile' 	>Agile</option>
				<option value='network' >Network</option>
				<option value='security'>Security</option>
			</select>
			
			<br/>
			<span>Select Load to load questions from Database</span><br/>
			<button id='load' class='w3-btn w3-blue' >Load</button>
			<button id='list' class='w3-btn w3-teal' >List</button>
			<button id='edit' class='w3-btn w3-teal' >Edit</button>
		
			<h3 id='action'></h3>
			
			<div id='list-all'>
			</div>

			<div id='edit-item'>
				<button id='prev' class='w3-btn w3-blue' >Prev</button>
				<button id='next' class='w3-btn w3-blue' >Next</button>
				<button id='add'  class='w3-btn w3-blue' >Add</button>
				<br/>
			
				<label for='id' class='w3-label'>ID</label>
				<input id='id' type='text' readonly class='w3-input'/>
			
				<label for='question' class='w3-label'>Question</label>
				<textarea id='question' class='w3-input'></textarea>
				<label for='answer' class='w3-label'>Answer</label>
				<textarea id='answer' class='w3-input'></textarea>
				<label for='rank' class='w3-label'>Rank</label>
				<select id='rank' class='w3-input'>
					<option value='1'>1</option>
					<option value='2'>2</option>
					<option value='3'>3</option>
				</select>
			
				<br/>
				<button id='submit' class='w3-btn'>Update</button>
				<span id='status'></span>
		</div>
	</div>
	
	<footer style='text-align: center; color: gray'>Copyright(c) 2016-17, Andrew Ferlitsch, Co-Organizer, Portland Data Science Group</footer>
<script>
var admin = angular.module( 'admin', []); 

var nth = 0;
var questions = [];

// Load Data into Web Page
function Load( data ) {
	questions = JSON.parse( data );
	nth = 0;
}

// Show a Question
function Show() {
	$("#id"      ).val( questions[ nth ].id );
	$("#question").val( questions[ nth ].question );
	$("#answer"  ).val( questions[ nth ].answer   );
	$("#rank"    ).val( questions[ nth ].rank   );
}

$(function() {
		
	$("button#list").hide();
	$("button#edit").hide();
	$("div#list-all").hide();
	$("div#edit-item").hide();
	
	// Load button selected
	$("button#load").click(function() {	
		var category = $("#category").val();

		$.ajax({
			url: "/interview/load.php",
			type: 'get',
			data: {'category': category },
			success: function( data, status ) { Load( data ); },
			error: function(xhr) { alert( xhr.status + " " + xhr.statusText ); }
		});

		$("button#list").show();
		$("button#edit").show();
		$("#status").html("");
	})
	
	// List button selected
	$("button#list").click(function() {
		$("div#edit-item").hide();
		$("div#list-all").show();
		var text = "";
		for ( var i = 0; i < questions.length; i++ ) {
			text += "ID: " + questions[ i ].id + " ";
			text += "Question: " + questions[ i ].question;
			text += "<br/>";
			text += "Answer: " + questions[ i ].answer;
			text += "<br/>";
			text += "<br/>";
		}
		$("h3#action").html("List of Questions");
		$("div#list-all").html( text );
		$("#status").html("");
	})	
	
	// Edit button selected
	$("button#edit").click(function() {
		$("div#edit-item").show();
		$("div#list-all").hide();
		$("h3#action").html("Edit or Add");
		$("#status").html("");
		Show();
	})
	
	// Previous item button selected
	$("button#prev").click(function() {
		if ( nth > 0 ) {
			nth--;
			Show();
			$("button#submit").html("Update");
		}
		$("#status").html("");
	})
	
	// Next item selected
	$("button#next").click(function() {
		if ( nth < questions.length - 1 ) {
			nth++;
			Show();
			$("button#submit").html("Update");
		}
		$("#status").html("");
	})	
	
	// Add button selected
	$("button#add").click(function() {
		$("input#id").val("");
		$("textarea#question").val("");
		$("textarea#answer").val("");
		$("select#rank").val("");
		$("button#submit").html("Add");
		$("#status").html("");
	})
	
	// Submit new/updated item
	$("button#submit").click(function() {
		var category = $("#category").val();
		var id 		 = $("input#id").val();
		var rank 	 = $("select#rank").val();
		var question = $("textarea#question").val();
		var answer   = $("textarea#answer").val();
		
		// New Item
		$("#status").html("");
		if ( $("button#submit").html() == "Add" ) {
			$.ajax({
				url: "/interview/add.php",
				type: 'post',
				data: {'category': category, 'question': question, 'answer': answer, 'rank': rank },
				success: function( data, status ) { $("#status").html("Added"); },
				error: function(xhr) { alert( xhr.status + " " + xhr.statusText ) }
			});
		}
		// Updated Item
		else {
			$.ajax({
				url: "/interview/update.php",
				type: 'post',
				data: {'id': id, 'category': category, 'question': question, 'answer': answer, 'rank': rank },
				success: function( data, status ) { $("#status").html("Updated"); },
				error: function(xhr) { alert( xhr.status + " " + xhr.statusText ) }
			});
		}
	})
})
</script>
</body>
</html>